<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous">

    <title>Data is Beautiful</title>

      <style>
          body {
            padding-top: 1rem;
            background-color: rgb(15, 14, 32);
            }
          .title-style {
            padding: 0rem 1.5rem;
            text-align: center;
            }
           h1 {
            color: rgb(37, 175, 135);
           }
           h2 {
            color: rgb(107, 191, 180);
           }
           p {
            color: rgb(93, 153, 147);
           }
           hr {
            color: rgb(206, 10, 54);
            height: 2px;
            border-width: 0;
            background-color: rgb(206, 10, 54)
           }
           .description-style {
            text-align: center;
           }
           .card{
            background-color: rgb(15, 14, 32);
           }
           svg{
            display: block;
            margin: auto
           }

           .card {
              box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
              max-width: 300px;
              margin: auto;
              text-align: center;
              font-family: arial;
            }

            .title {
              color: grey;
              font-size: 18px;
            }

            button {
              border: none;
              outline: 0;
              display: inline-block;
              padding: 8px;
              color: white;
              background-color: #000;
              text-align: center;
              cursor: pointer;
              width: 100%;
              font-size: 18px;
            }

            a {
              text-decoration: none;
              font-size: 22px;
              color: black;
            }

            button:hover, a:hover {
              opacity: 0.7;
            }

      </style>

  </head>
  <body>

  <main role="main" class="container">

    <div class="title-style">
        <h1>Our Data is Beautiful</h1>
        <h2 class="lead">Messages Statistics for WhatsApp</h2>
        <hr>
    </div>

    <div class="description-style">
        <h2>Content (Since {{chat_data.chat_start}} - {{chat_data.chat_end}})</h2>

        <div class="album py-5">
            <div class="container">
              <div class="row" style="align-items: center;">

                <div class="col-md-3">
                  <div class="card mb-4 shadow-sm">
                      <svg width="33%" height="33%" viewBox="0 0 16 16" class="bi bi-chat-right-text" fill="rgb(17, 62, 150)" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M2 1h12a1 1 0 0 1 1 1v11.586l-2-2A2 2 0 0 0 11.586 11H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z"/>
                          <path fill-rule="evenodd" d="M3 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM3 6a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 6zm0 2.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5z"/>
                      </svg>
                      <p style="margin-top: 5%"><span style="color: rgb(206, 10, 54);">{{chat_data.total_messages}}</span> <br> <span style="color: rgb(241, 243, 242);">Messages</span></p>
                  </div>
                </div>

                  <div class="col-md-3">
                  <div class="card mb-4 shadow-sm">
                      <svg width="33%" height="33%" viewBox="0 0 16 16" class="bi bi-emoji-smile" fill="rgb(17, 62, 150)" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                          <path fill-rule="evenodd" d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683z"/>
                          <path d="M7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
                      </svg>
                      <p style="margin-top: 5%"><span style="color: rgb(206, 10, 54);">{{chat_data.total_emojis}}</span> <br> <span style="color: rgb(241, 243, 242);">Emojis</span></p>
                  </div>
                </div>

                <div class="col-md-3">
                  <div class="card mb-4 shadow-sm">
                      <svg width="33%" height="33%" viewBox="0 0 16 16" class="bi bi-image" fill="rgb(17, 62, 150)" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M14.002 2h-12a1 1 0 0 0-1 1v9l2.646-2.354a.5.5 0 0 1 .63-.062l2.66 1.773 3.71-3.71a.5.5 0 0 1 .577-.094L15.002 9.5V3a1 1 0 0 0-1-1zm-12-1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm4 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                      </svg>
                      <p style="margin-top: 5%"><span style="color: rgb(206, 10, 54);">{{chat_data.total_media}}</span> <br> <span style="color: rgb(241, 243, 242);">Pictures</span></p>
                  </div>
                </div>

                <div class="col-md-3">
                  <div class="card mb-4 shadow-sm">
                      <svg width="33%" height="33%" viewBox="0 0 16 16" class="bi bi-share" fill="rgb(17, 62, 150)" xmlns="http://www.w3.org/2000/svg">
                          <path fill-rule="evenodd" d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>
                      </svg>
                      <p style="margin-top: 5%"><span style="color: rgb(206, 10, 54);">{{chat_data.total_urls}}</span> <br> <span style="color: rgb(241, 243, 242);">Links</span></p>
                  </div>
                </div>

              </div>
            </div>
        </div>

        <hr>
    </div>

    <div class="title-style">
        <h2>An average of {{chat_data.average_messages}} messages per user.</h2>

        <div class="album py-5">
            <div class="container">
              <div class="row" style="align-items: center;">

                  <div class="col-md-6">
                      <div class="card">
                          <h1>{{chat_data.name_member_one}}</h1>
                          <p class="title">Sent {{chat_data.total_messages_member_one}} Messages</p>
                      </div>
                      <div class="card">
                        <h1>{{chat_data.name_member_two}}</h1>
                        <p class="title">Sent {{chat_data.total_messages_member_two}} Messages</p>
                      </div>
                  </div>

                  <div class="col-md-6">
                      <div class="card mb-4 shadow-sm">
                          <canvas id="messagesPieChart" width="50%" height="50%"></canvas>
                      </div>
                  </div>

              </div>
            </div>
        </div>

        <hr>
    </div>

    <div class="title-style">
        <h2>Most commonly used Emoji.</h2>

        <div class="album py-5">
            <div class="container">
              <div class="row" style="align-items: center;">

                  <div class="col-md-4">
                      <div class="card">
                          <h1>{{chat_data.different_emojis}}</h1>
                          <h3 style="color:rgb(241, 243, 242)">Different Emojis used</h3>
                      </div>
                  </div>

                  <div class="col-md-4">
                      <div class="card">
                          <h1 style="font-size:100px">{{chat_data.common_emoji_emoji}}</h1>
                      </div>
                  </div>

                  <div class="col-md-4">
                      <div class="card">
                          <h3 style="color:rgb(241, 243, 242)">Most Common Emoji with <span style="color: rgb(37, 175, 135)">{{chat_data.common_emoji_count}}</span> appearences.</h3>
                      </div>
                  </div>

              </div>

            </div>
        </div>

        <hr>
    </div>

    <div class="title-style">
        <h2>When do you chat the most?</h2>

        <div class="album py-5">
            <div class="container">
              <div class="col-md-12" style="align-items: center;">
                  <div class="row" style="align-items: center;">
                      <div class="col-md-6">
                          <h1><span style="color: white">{{busiest_data.busiest_hour}}</span> is the busiest hour with <span style="color: white">{{busiest_data.busiest_hour_message_count}}</span> messages</h1>
                      </div>
                      <div class="col-md-6">
                          <canvas id="everageMessagePerHourChart" width="50%" height="50%"></canvas>
                      </div>
                  </div>

                  <hr style="background-color: rgb(15, 14, 32);">

                  <div class="row" style="align-items: center;">
                      <div class="col-md-6">
                          <h1><span style="color: white">{{busiest_data.busiest_day}}</span> is the busiest day with <span style="color: white">{{busiest_data.busiest_day_message_count}}</span> messages</h1>
                      </div>
                      <div class="col-md-6">
                          <canvas id="everageMessagePerDayChart" width="50%" height="50%"></canvas>
                      </div>
                  </div>

                  <hr style="background-color: rgb(15, 14, 32);">

                  <div class="row" style="align-items: center;">
                      <div class="col-md-6">
                          <h1><span style="color: white">{{busiest_data.busiest_month}}</span> is the busiest month with <span style="color: white">{{busiest_data.busiest_month_message_count}}</span> messages</h1>
                      </div>
                      <div class="col-md-6">
                          <canvas id="everageMessagePerMonthChart" width="50%" height="50%"></canvas>
                      </div>
                  </div>

              </div>

            <hr>

        </div>
    </div>

    </div>

  </main>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

    <!--    Chart.JS plot-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>

    <script>
    var memberOne = "{{chat_data.name_member_one}}"
    var memberTwo = "{{chat_data.name_member_two}}"

    function randomColor() {
        var letters = "0123456789ABCDEF";
        var color = '#';
        for (var i = 0; i < 6; i++)
            color += letters[(Math.floor(Math.random() * 16))];

        return(color)
    }

     new Chart(document.getElementById("messagesPieChart"), {
        type: 'pie',
        data: {
          labels: [memberOne, memberTwo],
          datasets: [{
            label: "Messages (number)",
            backgroundColor: [randomColor(), randomColor()],
            data: [{{chat_data.total_messages_member_one}},{{chat_data.total_messages_member_two}}]
          }]
        },
        options: {
          title: {
            display: false,
            text: 'Messages Sent by Each Member in WhatsApp Chat'
          }
        }
    });

    new Chart(document.getElementById("everageMessagePerHourChart"), {
    type: 'bar',
    data: {{data_busy_hour_json|safe}},
    options: {
      legend: { display: false },
      title: {
        display: false,
        text: 'Message per Hour'
      }
    }
    });

    new Chart(document.getElementById("everageMessagePerDayChart"), {
    type: 'horizontalBar',
    data: {{data_busy_day_json|safe}},
    options: {
      title: {
        display: false,
        text: 'Message per Day'
      },
      legend: {
        display: false,
      }
    },
    });

    new Chart(document.getElementById("everageMessagePerMonthChart"), {
    type: 'bar',
    data: {{data_busy_month_json|safe}},
    options: {
      title: {
        display: false,
        text: 'Message per Month'
      },
      legend: {
        display: false,
      }
    },
    });

    </script>

  </body>
</html>